{"version":3,"sources":["scripts/main.js"],"names":["addForm","tableHeader","document","querySelector","tableBody","form","rows","children","reverseSort","targetCellType","minAge","maxAge","personNameLength","errorAgeValue","errorTextValue","hasOneInptInCell","notificationTopPosition","sortTableBody","mouseEvent","targetCell","target","closest","textContent","num","querySelectorAll","findIndex","item","newTableBody","sort","a","b","x","replaceAll","y","isNaN","localeCompare","Number","append","addClassToTargetRow","targetRow","classList","remove","add","body","insertAdjacentHTML","addNewPerson","formEvent","preventDefault","namePerson","value","position","office","age","salary","length","pushNotification","toLocaleString","reset","text","type","title","div","createElement","h2","p","style","setTimeout","addInput","targetItem","prevText","isSalaryTarget","includes","input","className","addEventListener","keyboardEvent","key","inputValue"],"mappings":"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","file":"main.d45743be.js","sourceRoot":"..\\src","sourcesContent":["'use strict';\naddForm();\n\nconst tableHeader = document.querySelector('thead');\nconst tableBody = document.querySelector('tbody');\nconst form = document.querySelector('.new-employee-form');\nlet rows = [...tableBody.children];\n\nlet reverseSort = false;\nlet targetCellType = '';\nconst minAge = 18;\nconst maxAge = 90;\nconst personNameLength = 4;\nconst errorAgeValue = `age must be more than ${minAge} and less than ${maxAge}`;\nconst errorTextValue = `The name, position, office must be`\n  + ` longer than ${personNameLength} letters`;\nlet hasOneInptInCell = false;\nlet notificationTopPosition = 20;\n\ndocument.body.style = 'align-items: start;';\n\ntableHeader.addEventListener('click', sortTableBody);\ndocument.body.addEventListener('click', addClassToTargetRow);\nform.addEventListener('submit', addNewPerson);\ntableBody.addEventListener('dblclick', addInput);\n\nfunction sortTableBody(mouseEvent) {\n  rows = [...tableBody.children];\n\n  const targetCell = mouseEvent.target.closest('th').textContent;\n  const header = [...document.querySelectorAll('th')];\n  const num = header.findIndex(\n    item => item.textContent === mouseEvent.target.textContent\n  );\n\n  reverseSort = targetCellType === targetCell\n    ? !reverseSort\n    : false;\n\n  const newTableBody = rows.sort(\n    (a, b) => {\n      const x = a.children[num].textContent.replaceAll(/\\W/g, '');\n      const y = b.children[num].textContent.replaceAll(/\\W/g, '');\n\n      return isNaN(+x)\n        ? reverseSort\n          ? y.localeCompare(x)\n          : x.localeCompare(y)\n        : reverseSort\n          ? Number(y) - Number(x)\n          : Number(x) - Number(y);\n    });\n\n  targetCellType = mouseEvent.target.textContent;\n\n  tableBody.append(...newTableBody);\n};\n\nfunction addClassToTargetRow(mouseEvent) {\n  const targetRow = mouseEvent.target.closest('tr');\n\n  if (mouseEvent.target.closest('thead')) {\n    return;\n  }\n\n  if (!mouseEvent.target.closest('tbody')) {\n    for (const row of rows) {\n      row.classList.remove('active');\n    }\n\n    return;\n  }\n\n  for (const row of rows) {\n    row.classList.remove('active');\n  }\n\n  targetRow.classList.add('active');\n};\n\nfunction addForm() {\n  return document.body.insertAdjacentHTML('beforeend', `\n    <form class=\"new-employee-form\">\n      <label>\n        Name:\n\n        <input\n          name=\"name\"\n          type=\"text\"\n          data-qa=\"name\"\n          required\n        >\n      </label>\n\n      <label>\n        Position:\n\n        <input\n        name=\"name\"\n        type=\"text\"\n        data-qa=\"position\"\n        required\n        >\n      </label>\n\n      <label>\n        Office:\n\n        <select\n          name=\"office\"\n          data-qa=\"office\"\n          required\n        >\n          <option value=\"Tokyo\">Tokyo</option>\n          <option value=\"Singapore\">Singapore</option>\n          <option value=\"London\">London</option>\n          <option value=\"New York\">New York</option>\n          <option value=\"Edinburgh\">Edinburgh</option>\n          <option value=\"San Francisco\">San Francisco</option>\n        </select>\n      </label>\n\n      <label>\n        Age:\n\n        <input\n          name=\"age\"\n          type=\"number\"\n          data-qa=\"age\"\n          required\n        >\n      </label>\n\n      <label>\n        Salary:\n\n        <input\n          name=\"salary\"\n          type=\"number\"\n          data-qa=\"salary\"\n          required\n        >\n      </label>\n\n      <button>Save to table</button>\n    </form>\n`);\n}\n\nfunction addNewPerson(formEvent) {\n  formEvent.preventDefault();\n\n  const namePerson = document.querySelector(\"input[data-qa='name']\").value;\n  const position = document.querySelector(\"input[data-qa='position']\").value;\n  const office = document.querySelector(\"select[data-qa='office']\").value;\n  const age = +document.querySelector(\"input[data-qa='age']\").value;\n  const salary = +document.querySelector(\"input[data-qa='salary']\").value;\n\n  if (namePerson.length < personNameLength) {\n    pushNotification(\n      errorTextValue,\n      'error',\n    );\n\n    return;\n  }\n\n  if (age < minAge || age > maxAge) {\n    pushNotification(\n      errorAgeValue,\n      'error',\n    );\n\n    return;\n  }\n\n  if (salary < 0) {\n    pushNotification(\n      'Salary cannot be less than 0',\n      'error',\n    );\n\n    return;\n  }\n\n  tableBody.insertAdjacentHTML('beforeend', `\n  <tr>\n    <td>${namePerson}</td>\n    <td>${position}</td>\n    <td>${office}</td>\n    <td>${age}</td>\n    <td>$${(salary).toLocaleString('en')}</td>\n  </tr>\n`);\n\n  form.reset();\n\n  pushNotification(\n    'New employee was added to table',\n    'success',\n  );\n};\n\nfunction pushNotification(text, type) {\n  const title = type === 'error'\n    ? 'Sorry (-_-)'\n    : 'Success (^_^)';\n\n  const div = document.createElement('div');\n  const h2 = document.createElement('h2');\n  const p = document.createElement('p');\n\n  div.classList.add(`${type}`, 'notification');\n  h2.textContent = title;\n  h2.classList.add(`title`);\n  p.textContent = text;\n\n  div.style = `\n  top: ${notificationTopPosition}px;\n  right: 20px;\n  `;\n\n  document.body.append(div);\n  div.append(h2);\n  h2.append(p);\n\n  const remove = () => div.remove();\n  const resetTop = () => {\n    notificationTopPosition -= 190;\n  };\n\n  notificationTopPosition += 190;\n\n  setTimeout(remove, 3000);\n  setTimeout(resetTop, 3000);\n}\n\nfunction addInput(mouseEvent) {\n  if (hasOneInptInCell) {\n    return;\n  }\n\n  hasOneInptInCell = true;\n\n  const targetItem = mouseEvent.target.closest('td');\n  const prevText = targetItem.textContent;\n  const isSalaryTarget = prevText.includes('$');\n\n  const input = document.createElement('input');\n\n  input.className = 'cell-input';\n\n  input.value = prevText.replaceAll(/\\W/g, '');\n\n  input.type = isNaN(+prevText.replaceAll(/\\W/g, ''))\n    ? 'text'\n    : 'number';\n\n  targetItem.textContent = '';\n\n  targetItem.append(input);\n\n  const editValue = (keyboardEvent) => {\n    if (keyboardEvent.key === 'Enter') {\n      const inputValue = document.querySelector('.cell-input').value;\n\n      let text = `${inputValue}`;\n\n      if (!inputValue || !text) {\n        text = prevText;\n      }\n\n      if (input.type === 'number') {\n        if (+inputValue < 0) {\n          pushNotification(\n            'Value must be more than 0',\n            'error',\n          );\n\n          return;\n        }\n\n        text = `$${(+inputValue).toLocaleString('en')}`;\n\n        if (!isSalaryTarget) {\n          text = `${inputValue}`;\n\n          if (+inputValue < minAge || +inputValue > maxAge) {\n            pushNotification(\n              errorAgeValue,\n              'error',\n            );\n\n            return;\n          }\n        }\n      } else {\n        if (inputValue.length < personNameLength && inputValue.length !== 0) {\n          pushNotification(\n            errorTextValue,\n            'error',\n          );\n\n          return;\n        }\n      }\n\n      input.remove();\n      targetItem.textContent = text;\n      hasOneInptInCell = false;\n\n      pushNotification(\n        'Employee was changed',\n        'success',\n      );\n    }\n  };\n\n  input.addEventListener('keyup', editValue);\n};\n"]}